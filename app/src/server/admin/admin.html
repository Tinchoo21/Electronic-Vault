
<!DOCTYPE html>

<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title> Elektronsko vodjenje trezora | Admin Panel </title>
    <script src="https://kit.fontawesome.com/665181cd03.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="admin.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="referrer" content="strict-origin" />

</head>
<body>
    <div class="sidebar">
        <div class="logo-details">
            <i class='bx'>
                <img src="bamcardlogo.png" width="30px" height="30px" draggable="false" />
            </i>
            <span class="logo_name">BamCard Admin</span>
        </div>
        <ul class="nav-links">
            <li>
                <a href="admin" class="active">
                    <i class='bx bx-grid-alt'></i>
                    <span class="links_name">Panel</span>
                </a>
            </li>
            <li>
                <a href="adminAnalitika">
                    <i class='bx bx-pie-chart-alt-2'></i>
                    <span class="links_name">Analitika</span>
                </a>
            </li>
            <li>
                <a href="adminKlijenti">
                    <i class='bx bx-book-alt'></i>
                    <span class="links_name">Klijenti i proizvodi</span>
                </a>
            </li>
            <li>
                <a href="adminDodajKlijenta">
                    <i class='bx bxs-book-add'></i>
                    <span class="links_name">Dodaj klijenta</span>
                </a>
            </li>
            <li>
                <a href="adminListaUposlenih">
                    <i class='bx bx-list-ul'></i>
                    <span class="links_name">Lista uposlenih</span>
                </a>
            </li>
            <li>
                <a href="adminTim">
                    <i class='bx bx-user'></i>
                    <span class="links_name">Dodaj uposlenika</span>
                </a>
            </li>
            <li class="log_out">
                <a href="logout">
                    <i class='bx bx-log-out'></i>
                    <span class="links_name">Odjavi se</span>
                </a>
            </li>
        </ul>
    </div>
    <section class="home-section">
        <nav>
            <div class="sidebar-button">
                <i class='bx bx-menu sidebarBtn'></i>
                <span class="dashboard">Panel</span>
            </div>

            <div class="profile-details">
                <div class="profile-center">
                    <i class='bx bx-user'></i>
                    <span class="admin_name" id="nameAndSurname">
                        <script>
                            fetch('/nameAndSurname')
                                .then(response => response.text())
                                .then(data => {
                                    document.getElementById('nameAndSurname').textContent = data;
                                });
                        </script>
                    </span>
                </div>
            </div>
        </nav>

        <div class="home-content">
            <div class="overview-boxes">
                <div class="box">
                    <div class="right-side">
                        <div class="box-topic">Broj narudzbi</div>
                        <div class="number">8,876</div>
                        <div class="indicator">
                            <i class='bx bx-up-arrow-alt'></i>
                            <span class="text">Rast u odnosu na jucer</span>
                        </div>
                    </div>
                    <i class='bx bx-cart-alt cart'></i>
                </div>
                <div class="box">
                    <div class="right-side">
                        <div class="box-topic">U izradi</div>
                        <div class="number">5,876</div>
                        <div class="indicator">
                            <i class='bx bx-up-arrow-alt'></i>
                            <span class="text">Rast u odnosu na jucer</span>
                        </div>
                    </div>
                    <i class='bx bxs-cart-add cart two'></i>
                </div>
                <div class="box">
                    <div class="right-side">
                        <div class="box-topic">U zalihama</div>
                        <div class="number">22,876</div>
                        <div class="indicator">
                            <i class='bx bx-down-arrow-alt down'></i>
                            <span class="text">Pad u odnosu na jucer</span>
                        </div>
                    </div>
                    <i class='bx bx-cart cart three'></i>
                </div>
                <div class="box">
                    <div class="right-side">
                        <div class="box-topic">Povrat/Skart</div>
                        <div class="number">1,324</div>
                        <div class="indicator">
                            <i class='bx bx-down-arrow-alt down'></i>
                            <span class="text">Pad u odnosu na jucer</span>
                        </div>
                    </div>
                    <i class='bx bxs-cart-download cart four'></i>
                </div>
            </div>

            <div class="sales-boxes">
                <div class="recent-sales box">
                    <div class="title">Nedavni zahtjevi</div>
                    <div class="sales-details">
                        <ul class="details">
                            <li class="topic">Datum</li>
                            <li><a href="#">03 Mar 2023</a></li>
                            <li><a href="#">22 Feb 2023</a></li>
                            <li><a href="#">15 Feb 2023</a></li>
                            <li><a href="#">02 Feb 2023</a></li>
                            <li><a href="#">20 Jan 2023</a></li>
                            <li><a href="#">15 Jan 2023</a></li>
                            <li><a href="#">02 Jan 2023</a></li>
                            <li><a href="#">01 Jan 2023</a></li>
                        </ul>
                        <ul class="details">
                            <li class="topic">Kupac</li>
                            <li><a href="#">ASA Banka</a></li>
                            <li><a href="#">NLB Banka</a></li>
                            <li><a href="#">BBI Banka</a></li>
                            <li><a href="#">Union Banka</a></li>
                            <li><a href="#">Ziraat Banka</a></li>
                            <li><a href="#">Raiffeisen Banka</a></li>
                            <li><a href="#">Sparkasse Banka</a></li>
                            <li><a href="#">BBI Banka</a></li>

                        </ul>
                        <ul class="details">
                            <li class="topic">Trenutno stanje</li>
                            <li><a href="#">U proizvodnji</a></li>

                            <li><a href="#">Na cekanju</a></li>
                            <li><a href="#">U proizvodnji</a></li>
                            <li><a href="#">Zahtjev odbijen</a></li>
                            <li><a href="#">Dostavljeno</a></li>
                            <li><a href="#">Dostavljeno</a></li>
                            <li><a href="#">Dostavljeno</a></li>
                            <li><a href="#">Dostavljeno</a></li>

                        </ul>
                        <ul class="details">
                            <li class="topic">Ukupno</li>
                            <li><a href="#">2540</a></li>
                            <li><a href="#">1456</a></li>
                            <li><a href="#">258</a></li>
                            <li><a href="#">170</a></li>
                            <li><a href="#">95</a></li>
                            <li><a href="#">1239</a></li>
                            <li><a href="#">380</a></li>
                            <li><a href="#">2160</a></li>

                        </ul>
                    </div>
                    <div class="button">
                        <a href="#">Pogledaj sve</a>
                    </div>
                </div>
                <div class="top-sales box">
                    <div class="title">Uposlenici </div>
                  
                    <ul class="top-sales-details">
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <script>
        let sidebar = document.querySelector(".sidebar");
        let sidebarBtn = document.querySelector(".sidebarBtn");
        sidebarBtn.onclick = function () {
            sidebar.classList.toggle("active");
            if (sidebar.classList.contains("active")) {
                sidebarBtn.classList.replace("bx-menu", "bx-menu-alt-right");
            } else
                sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
        }
        let tableHtml = "";
        fetch('/userLogin')
            .then(response => response.json())
            .then(data => {
                data.forEach(user => {
                    let date = new Date(user.last_login);
                    const formattedDate = date.toLocaleString();
                    let image = "";
                    let statusClass = "";
                    if (user.department === "Admin") {
                        image = '"fa-solid fa-user-tie fa-xl"'
                    } else if (user.department === "Trezor") {
                        image = '"fa-solid fa-vault fa-xl"';
                    } else if (user.department === "Person") {
                        image = '"fa-solid fa-credit-card fa-xl"';
                    }

                    const now = new Date();
                    const isToday = now.toDateString() === date.toDateString();

                    if (isToday) {
                        statusClass = "online";
                    } else {
                        statusClass = "offline";
                    }

                    tableHtml += `<li><a draggable="false"><i id="upoIcons" class=${image}></i> <span class="product">${user.name} ${user.surname}</span></a>  <span class="${statusClass}">${formattedDate}</span></li><hr>`;
                });
                const tableContainer = document.querySelector(".top-sales-details");
                tableContainer.innerHTML = tableHtml;
            })
            .catch(error => console.error(error));

    </script>
</body>
</html>
